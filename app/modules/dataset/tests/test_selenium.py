# Generated by Selenium IDE
import os
import sys
import time

from selenium.webdriver.common.by import By

from core.selenium.common import close_driver, initialize_driver

sys.path.append(os.getcwd())


class TestUploadDataSet:
    def setup_method(self, method):
        self.driver = initialize_driver()
        self.driver.implicitly_wait(10)
        self.vars = {}

    def teardown_method(self, method):
        close_driver(self.driver)

    def test_validUploadDataSet(self):
        self.driver.get("http://127.0.0.1:5000/")
        self.driver.set_window_size(1810, 895)
        self.driver.find_element(By.CSS_SELECTOR, ".nav-link:nth-child(1)").click()
        self.driver.find_element(By.ID, "email").send_keys("user1@example.com")
        self.driver.find_element(By.ID, "password").send_keys("1234")
        self.driver.find_element(By.ID, "submit").click()
        self.driver.find_element(By.LINK_TEXT, "Upload dataset").click()
        self.driver.find_element(By.ID, "title").click()
        self.driver.find_element(By.ID, "title").send_keys("Prueba")
        self.driver.find_element(By.ID, "desc").click()
        self.driver.find_element(By.ID, "desc").send_keys("Prueba")
        self.driver.find_element(By.ID, "myDropzone").click()
        self.driver.find_element(By.LINK_TEXT, "Doe, John").click()
        self.driver.find_element(By.CSS_SELECTOR, ".dropdown-item:nth-child(3)").click()


class TestUploadWithInvalidData:
    def setup_method(self, method):
        self.driver = initialize_driver()
        self.driver.implicitly_wait(10)
        self.vars = {}

    def teardown_method(self, method):
        close_driver(self.driver)

    def test_invalidUploadDataSet(self):
        self.driver.get("http://127.0.0.1:5000/")
        self.driver.set_window_size(1706, 901)
        self.driver.find_element(By.CSS_SELECTOR, ".nav-link:nth-child(1)").click()
        self.driver.find_element(By.ID, "email").send_keys("user1@example.com")
        self.driver.find_element(By.ID, "password").send_keys("1234")
        self.driver.find_element(By.ID, "submit").click()
        self.driver.find_element(By.LINK_TEXT, "My datasets").click()
        self.driver.find_element(By.CSS_SELECTOR, ".sidebar-item:nth-child(6) .align-middle:nth-child(2)").click()
        self.driver.find_element(By.ID, "title").click()
        self.driver.find_element(By.ID, "title").send_keys("a")
        self.driver.find_element(By.ID, "desc").click()
        self.driver.find_element(By.ID, "desc").send_keys("a")
        self.driver.find_element(By.ID, "myDropzone").click()
        self.driver.find_element(By.LINK_TEXT, "Log out").click()


class TestEditdraftdataset:
    def setup_method(self, method):
        self.driver = initialize_driver()
        self.driver.implicitly_wait(10)
        self.vars = {}

    def teardown_method(self, method):
        close_driver(self.driver)

    def test_testEditDraftDataSet(self):
        self.driver.get("http://127.0.0.1:5000/")
        self.driver.set_window_size(1850, 1053)
        self.driver.find_element(By.CSS_SELECTOR, ".nav-link:nth-child(1)").click()
        self.driver.find_element(By.ID, "email").send_keys("user1@example.com")
        self.driver.find_element(By.ID, "password").send_keys("1234")
        self.driver.find_element(By.CSS_SELECTOR, ".row:nth-child(5) > .col-lg-6").click()
        self.driver.find_element(By.ID, "submit").click()
        self.driver.find_element(By.LINK_TEXT, "My datasets").click()
        self.driver.find_element(By.CSS_SELECTOR, ".sidebar-item:nth-child(6) .align-middle:nth-child(2)").click()
        self.driver.find_element(By.ID, "title").click()
        self.driver.find_element(By.ID, "title").send_keys("draft")
        self.driver.find_element(By.ID, "desc").send_keys("dragft")
        self.driver.find_element(By.ID, "save_draft_button").click()
        self.driver.find_element(By.LINK_TEXT, "Edit").click()
        self.driver.find_element(By.ID, "publication_type").click()
        dropdown = self.driver.find_element(By.ID, "publication_type")
        dropdown.find_element(By.XPATH, "//option[. = 'Official Tournament']").click()
        self.driver.find_element(By.CSS_SELECTOR, "option:nth-child(6)").click()
        self.driver.find_element(By.ID, "desc").click()
        self.driver.find_element(By.ID, "desc").send_keys("Test editado")
        self.driver.find_element(By.ID, "myDropzone").click()


class TestBuildFromCart:
    def setup_method(self, method):
        self.driver = initialize_driver()
        self.driver.implicitly_wait(10)
        self.vars = {}

    def teardown_method(self, method):
        close_driver(self.driver)

    def test_buildfromcart(self):
        self.driver.get("http://127.0.0.1:5000/")
        self.driver.set_window_size(1810, 895)
        self.driver.find_element(By.CSS_SELECTOR, ".nav-link:nth-child(1)").click()
        self.driver.find_element(By.ID, "email").send_keys("user1@example.com")
        self.driver.find_element(By.ID, "password").send_keys("1234")
        self.driver.find_element(By.ID, "submit").click()
        self.driver.find_element(By.CSS_SELECTOR, ".sidebar-item:nth-child(7) .align-middle:nth-child(2)").click()
        self.driver.find_element(By.LINK_TEXT, "resultadosp").click()
        self.driver.find_element(By.CSS_SELECTOR, ".row:nth-child(2) > .col-12 > .btn-outline-success").click()
        self.driver.find_element(By.CSS_SELECTOR, ".nav-icon > .feather-shopping-cart").click()
        self.driver.find_element(By.CSS_SELECTOR, ".btn-success").click()
        time.sleep(2)
        self.driver.find_element(By.ID, "title").click()
        self.driver.find_element(By.ID, "title").send_keys("Prueba de build")
        self.driver.find_element(By.ID, "desc").click()
        self.driver.find_element(By.ID, "desc").send_keys("prueba")
        self.driver.find_element(By.CSS_SELECTOR, ".btn-primary:nth-child(2)").click()


class TestUploadDraftSuccessful:
    def setup_method(self, method):
        self.driver = initialize_driver()
        self.driver.implicitly_wait(10)
        self.vars = {}

    def teardown_method(self, method):
        close_driver(self.driver)

    def test_uploaddraftsuccessful(self):
        self.driver.get("http://127.0.0.1:5000/")
        self.driver.set_window_size(1706, 961)
        self.driver.find_element(By.CSS_SELECTOR, ".nav-link:nth-child(1)").click()
        self.driver.find_element(By.ID, "email").send_keys("user1@example.com")
        self.driver.find_element(By.ID, "password").send_keys("1234")
        self.driver.find_element(By.ID, "submit").click()
        self.driver.find_element(By.CSS_SELECTOR, ".sidebar-item:nth-child(6) .align-middle:nth-child(2)").click()
        self.driver.find_element(By.ID, "title").click()
        self.driver.find_element(By.ID, "title").send_keys("Prueba")
        self.driver.find_element(By.ID, "desc").click()
        self.driver.find_element(By.ID, "desc").send_keys("seread")
        self.driver.find_element(By.ID, "save_draft_button").click()
        self.driver.find_element(By.CSS_SELECTOR, ".sidebar-item:nth-child(7) .align-middle:nth-child(2)").click()


class TestUploadDraftUnsuccessful:
    def setup_method(self, method):
        self.driver = initialize_driver()
        self.driver.implicitly_wait(10)
        self.vars = {}

    def teardown_method(self, method):
        close_driver(self.driver)

    def test_upload_draft_unsuccessful(self):
        self.driver.get("http://127.0.0.1:5000/")
        self.driver.set_window_size(1706, 961)
        self.driver.find_element(By.CSS_SELECTOR, ".nav-link:nth-child(1)").click()
        self.driver.find_element(By.ID, "email").send_keys("user1@example.com")
        self.driver.find_element(By.ID, "password").send_keys("1234")
        self.driver.find_element(By.ID, "submit").click()
        self.driver.find_element(By.LINK_TEXT, "Upload dataset").click()
        self.driver.find_element(By.ID, "save_draft_button").click()
        assert self.driver.switch_to.alert.text == "Para guardar como borrador, introduce un t√≠tulo."
        self.driver.switch_to.alert.accept()
        self.driver.find_element(By.CSS_SELECTOR, ".main").click()
